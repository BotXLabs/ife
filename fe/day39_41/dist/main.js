!function(t){var e={};function i(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQueryArray=function(){return location.hash.substr(1).split("&")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),s={init:function(t,e){this.wrapper=document.getElementById(t),this.xAxisData=e.xAxis.data,this.series=e.series,this.svgW=this.wrapper.clientWidth,this.svgH=this.wrapper.clientHeight,this.svgPadding=60,this.xAxisLength=this.svgW-2*this.svgPadding,this.yAxisLength=this.svgH-2*this.svgPadding,this.xAxisX1=this.svgPadding,this.xAxisX2=this.svgPadding+this.xAxisLength,this.xAxisY1=this.svgH-this.svgPadding,this.yAxisX1=this.svgPadding,this.yAxisY1=this.svgPadding,this.yAxisY2=this.svgH-this.svgPadding,this.axisColor="#ccc",this.color=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],this.textColor="black",this.splitNumber=5,this.svg=(0,a.drawSVG)(this.svgW,this.svgH),this.wrapper.appendChild(this.svg),this.draw()},draw:function(){if(this.series&&this.series.length){this.yAxisDataLength=this.series[0].sale.length,this.maxData=Math.max.apply(null,this.series.map(function(t){return Math.max.apply(null,t.sale)})),this.splitData=this.maxData/this.splitNumber,this.splitLength=this.yAxisLength*(this.splitData/this.maxData),this.w=this.xAxisLength/this.yAxisDataLength,this.barW=.6*this.w,this.barGap=.4*this.w,(0,a.drawLine)(this.svg,this.xAxisX1,this.xAxisY1,this.xAxisX2,this.xAxisY1,this.axisColor),(0,a.drawLine)(this.svg,this.yAxisX1,this.yAxisY1,this.yAxisX1,this.yAxisY2,this.axisColor);for(var t=0;t<this.splitNumber;t++){var e=this.yAxisY1+this.splitLength*t;(0,a.drawLine)(this.svg,this.xAxisX1,e,this.xAxisX2,e,this.axisColor),(0,a.drawText)(this.svg,this.xAxisX1-20,e+5,this.splitData*(this.splitNumber-t),this.textColor)}for(var i=0,s=this.series.length;i<s;i++)for(var n=this.series[i].sale,r=this.barW/s,o=0;o<this.yAxisDataLength;o++){var h=n[o],l=this.yAxisLength*(h/this.maxData),c=this.xAxisX1+(this.barW+this.barGap)*o+r*i,d=this.xAxisY1-l;if((0,a.drawRect)(this.svg,c,d,r,l,this.color[i]),0===i){var u=this.xAxisX1+(this.barW+this.barGap)*o;(0,a.drawText)(this.svg,u+this.barW/2,this.xAxisY1+20,this.xAxisData[o])}}}},setData:function(t){this.series=t,this.svg.innerHTML="",this.draw()}};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s={init:function(t,e){this.wrapper=document.getElementById(t),this.canvas=document.getElementById("canvas"),this.ctx=canvas.getContext("2d"),this.ratio=a.ratio,this.xAxisData=e.xAxis.data,this.series=e.series,this.canvasW=this.wrapper.clientWidth,this.canvasH=this.wrapper.clientHeight,this.canvasPadding=60,this.xAxisLength=this.canvasW-2*this.canvasPadding,this.yAxisLength=this.canvasH-2*this.canvasPadding,this.xAxisX1=this.canvasPadding,this.xAxisX2=this.canvasPadding+this.xAxisLength,this.xAxisY1=this.canvasH-this.canvasPadding,this.yAxisX1=this.canvasPadding,this.yAxisY1=this.canvasPadding,this.yAxisY2=this.canvasH-this.canvasPadding,this.axisColor="#ccc",this.color=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],this.textColor="black",this.splitNumber=5,this.draw()},draw:function(){if(this.series&&this.series.length){this.yAxisDataLength=this.series[0].sale.length,this.maxData=Math.max.apply(null,this.series.map(function(t){return Math.max.apply(null,t.sale)})),this.splitData=this.maxData/this.splitNumber,this.splitLength=this.yAxisLength*(this.splitData/this.maxData),this.w=this.xAxisLength/this.yAxisDataLength,this.barW=.6*this.w,this.barGap=.4*this.w,this.canvas.setAttribute("width",this.canvasW*this.ratio),this.canvas.setAttribute("height",this.canvasH*this.ratio),this.canvas.style.width=this.canvasW+"px",this.canvas.style.height=this.canvasH+"px",this.ctx.scale(this.ratio,this.ratio),(0,a.drawLine)(this.ctx,this.xAxisX1,this.xAxisY1,this.xAxisX2,this.xAxisY1,this.axisColor),(0,a.drawLine)(this.ctx,this.yAxisX1,this.yAxisY1,this.yAxisX1,this.yAxisY2,this.axisColor);for(var t=0;t<this.splitNumber;t++){var e=this.yAxisY1+this.splitLength*t;(0,a.drawLine)(this.ctx,this.xAxisX1,e,this.xAxisX2,e,this.axisColor),(0,a.drawText)(this.ctx,this.xAxisX1-20,e+5,this.splitData*(this.splitNumber-t))}for(var i=0,s=this.series.length;i<s;i++)for(var n=this.series[i].sale,r=void 0,o=void 0,h=0;h<this.yAxisDataLength;h++){var l=n[h],c=this.yAxisLength*(l/this.maxData),d=this.xAxisX1+(this.barW+this.barGap)*h,u=(this.xAxisY1,d+this.barW/2),x=this.xAxisY1-c;0!==h&&(0,a.drawLine)(this.ctx,r,o,u,x,this.color[i]),(0,a.drawCircle)(this.ctx,u,x,2),r=u,o=x,0===i&&(0,a.drawText)(this.ctx,d+this.barW/2,this.xAxisY1+20,this.xAxisData[h])}}},setData:function(t){this.series=t,(0,a.clear)(this.canvas),this.draw()}};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],a=!0,s=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(a=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function s(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);if(e){var s=!0,n=!1,r=void 0;try{for(var o,h=Object.entries(e)[Symbol.iterator]();!(s=(o=h.next()).done);s=!0){var l=o.value,c=a(l,2),d=c[0],u=c[1];i.setAttribute(d,u)}}catch(t){n=!0,r=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw r}}}return i}e.drawSVG=function(t,e){return s("svg",{width:t,height:e})},e.drawLine=function(t,e,i,a,n,r){t.appendChild(s("line",{x1:e,x2:a,y1:i,y2:n,stroke:r}))},e.drawText=function(t,e,i,a,n){var r=s("text",{x:e,y:i,fill:n,"text-anchor":"middle"});r.innerHTML=a,t.appendChild(r)},e.drawRect=function(t,e,i,a,n,r){var o=s("rect",{x:e,y:i,width:a,height:n,fill:r});t.appendChild(o)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawLine=function(t,e,i,a,s,n){t.beginPath(),t.moveTo(e,i),t.lineTo(a,s),t.strokeStyle=n,t.stroke()},e.drawText=function(t,e,i,a){t.beginPath(),t.font="14px monaco",t.textAlign="center",t.fillText(a,e,i)},e.drawCircle=function(t,e,i,a){t.beginPath(),t.arc(e,i,a,0,2*Math.PI,!0),t.fill()},e.clear=function(t){t.getContext("2d").clearRect(0,0,t.width,t.height)};var a=window.devicePixelRatio||1,s=document.createElement("canvas").getContext("2d"),n=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;e.ratio=a/n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateDataByIndex=function(t,e,i){n[t].sale[e]=i,localStorage.setItem("ifeData",JSON.stringify(n))};var a=[{product:"手机",region:"华东",sale:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"手机",region:"华北",sale:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"手机",region:"华南",sale:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"笔记本",region:"华东",sale:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"笔记本",region:"华北",sale:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"笔记本",region:"华南",sale:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"智能音箱",region:"华东",sale:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"智能音箱",region:"华北",sale:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"智能音箱",region:"华南",sale:[10,40,10,6,5,6,8,6,6,6,7,26]}],s=localStorage.getItem("ifeData");s||localStorage.setItem("ifeData",JSON.stringify(a));var n=s?JSON.parse(s):a;e.sourceData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=b,e.renderTable=m;var a=i(5),s=o(i(2)),n=o(i(1)),r=i(0);function o(t){return t&&t.__esModule?t:{default:t}}var h=document.getElementById("table-wrapper"),l=null,c=null,d=null,u={east:"华东",south:"华南",north:"华北"},x={cellphone:"手机",laptop:"笔记本",speaker:"智能音箱"};function p(){s.default.setData(b()),n.default.setData(b())}function v(t){if(d&&d===document.activeElement)switch(t.keyCode){case 27:console.log("esc"),g();break;case 13:console.log("enter"),y()}}function f(){l&&(l.classList.remove("editing"),l.classList.add("editable"),l.innerHTML=c,l=null,c=null,window.removeEventListener("keydown",v))}function g(){f()}function y(){var t=d.value.trim();if(!t||isNaN(parseFloat(t)))alert("请输入正确的数字!");else{var e=l.parentNode.getAttribute("row-index"),i=l.getAttribute("data-index");(0,a.updateDataByIndex)(e,i,t),p(),m(),f()}}function b(){var t=(0,r.getQueryArray)(),e=[],i=!0,s=!1,n=void 0;try{for(var o,h=t[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var l=o.value;u[l]?e.push(u[l]):x[l]&&e.push(x[l])}}catch(t){s=!0,n=t}finally{try{!i&&h.return&&h.return()}finally{if(s)throw n}}for(var c=[],d=0,p=a.sourceData.length;d<p;d++){var v=a.sourceData[d];e.includes(v.region)&&e.includes(v.product)&&(v.rowIndex=d,c.push(v))}return c}function m(){console.log("render table"),h.innerHTML="";var t=document.createElement("table"),e=document.createElement("thead"),i=document.createElement("tbody"),a=container.querySelectorAll('#region-radio-wrapper input:not([value="all"]):checked'),s=container.querySelectorAll('#product-radio-wrapper input:not([value="all"]):checked'),n=a.length,r=s.length,o=b(),l=o.length,c=!1,d=Array.from({length:12},function(t,e){return e+1});1===n&&r>1?(c=!0,d.unshift("商品"),d.unshift("地区")):(d.unshift("地区"),d.unshift("商品"));for(var u=document.createElement("tr"),x=0,p=d.length;x<p;x++){var v=document.createElement("th");v.innerHTML=x<2?d[x]:d[x]+"月",u.appendChild(v)}e.appendChild(u),t.appendChild(e);for(var f=0;f<l;f++){console.log(l);var g=document.createElement("tr");g.setAttribute("data-index",f);var y=o[f];g.setAttribute("row-index",y.rowIndex);var m=y.product,A=y.region,w=y.sale,L=document.createElement("td");L.innerHTML=A;var k=document.createElement("td");k.innerHTML=m,c?(L.rowSpan=l,0===f&&g.appendChild(L),g.appendChild(k)):n>1?(k.rowSpan=n,f%n==0&&g.appendChild(k),g.appendChild(L)):(g.appendChild(k),g.appendChild(L));for(var D=0,P=w.length;D<P;D++){var C=document.createElement("td");C.classList.add("editable"),C.setAttribute("data-index",D),C.innerHTML=w[D],g.appendChild(C)}i.appendChild(g)}t.appendChild(i),h.appendChild(t)}h.onmousemove=function(t){var e=t.target;if("TD"===e.tagName){var i=e.parentNode.getAttribute("data-index"),a=b()[i];s.default.setData([a]),n.default.setData([a])}},h.onmouseleave=function(t){p()},document.onclick=function(t){f()},h.onclick=function(t){var e=t.target,i=!1;if(e.classList.contains("editable")){var a=e.innerHTML;e.innerHTML='<input type="text" placeholder="'+a+'"><button class="cancel">取消</button><button class="submit">确定</button>',e.classList.remove("editable"),e.classList.add("editing"),f(),l=e,c=a,i=!0,(d=e.querySelector("input")).focus(),window.addEventListener("keydown",v)}else e.classList.contains("cancel")?(g(),i=!0):e.classList.contains("submit")?(y(),i=!0):(e.classList.contains("editing")||e===d)&&(i=!0);i&&t.stopPropagation()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCheckBoxGroup=function(t,e){var i="",a=e.length,s=void 0;i+=['<input type="checkbox" value="',"all",'">',"<label>","全选","</label>"].join("");for(var n=0,r=0;r<a;r++){var o=e[r],h=o.value,l=o.text,c=o.checked;c&&n++,i+=['<input type="checkbox" value="',h,'"',c?" checked":"",">","<label>",l,"</label>"].join("")}t.innerHTML=i,(s=t.querySelector('input[value="all"]')).checked=n===a,t.onclick=function(i){var a=i.target;if("checkbox"===a.type){var n=a.value;if("all"===n)a.checked?function(){var e=t.querySelectorAll('input:not([value="all"])'),i=!0,a=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var o=n.value;o.checked||(o.checked=!0)}}catch(t){a=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(a)throw s}}}():(a.checked=!0,i.stopPropagation());else{var r=t.querySelectorAll('input:not([value="all"]):checked');0===r.length?(a.checked=!0,i.stopPropagation()):s.checked=r.length===e.length}}}}},,function(t,e,i){},function(t,e,i){"use strict";i(9);var a=i(7),s=i(6),n=h(i(2)),r=h(i(1)),o=i(0);function h(t){return t&&t.__esModule?t:{default:t}}var l=document.getElementById("region-radio-wrapper"),c=document.getElementById("product-radio-wrapper"),d=document.getElementById("container");function u(){var t=(0,o.getQueryArray)(),e=function(e){return t.includes(e)};(0,a.createCheckBoxGroup)(l,[{value:"east",text:"华东",checked:e("east")},{value:"south",text:"华南",checked:e("south")},{value:"north",text:"华北",checked:e("north")}]),(0,a.createCheckBoxGroup)(c,[{value:"cellphone",text:"手机",checked:e("cellphone")},{value:"laptop",text:"笔记本",checked:e("laptop")},{value:"speaker",text:"智能音箱",checked:e("speaker")}])}function x(){var t=(0,s.getData)();(0,s.renderTable)(),n.default.setData(t),r.default.setData(t)}d.addEventListener("click",function(t){if("checkbox"===t.target.type){var e=d.querySelectorAll('input:not([value="all"]):checked'),i=[],a=!0,s=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var h=r.value;i.push(h.value)}}catch(t){s=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}location.hash="#"+i.join("&")}}),window.onhashchange=x,window.onpopstate=function(){u(),x()},u(),(0,s.renderTable)();var p=(0,s.getData)(),v=Array.from({length:12},function(t,e){return e+1+"月"});r.default.init("bar-chart-wrapper",{xAxis:{data:v},series:p}),n.default.init("line-chart-wrapper",{xAxis:{data:v},series:p})}]);